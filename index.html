<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>simon</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>

<div class="container">


    <!-- Pads -->

    <div class="simonPads">
        <div id="0" class="pad green"></div>
        <div id="1" class="pad red"></div>
        <div id="2" class="pad yellow"></div>
        <div id="3" class="pad blue"></div>
    </div>


    <!-- Pads-->
    <div class="controller">

        <div class="title">SIMON</div>
        <div class="display inline">00</div>
        <div class="start inline">START</div>
        <div class="strict inline">STRICT</div>
        <div class="switchContainer">
            <p class="off inline">OFF</p>
            <div class="outerSwitch inline">
                <div class="innerSwitch"></div>
            </div>
            <p class="on inline">ON</p>
        </div>
    </div>
<!-- -->
</div>
<script src="jquery-2.2.4.min.js"></script>
<script>
    $(document).ready(function() {

        // start board sequance

        var userSeq =[];
        var simonSeq =[];
        var id , color, level =0;
        
        $('.start').click(function () {
            level++ ;
            startSeq();
        });

        //Simon turn

        function startSeq(){
            $('.display').text(level);
            randomNum();
            var i =0;
            var myInterva = setInterval(function () {
                id = simonSeq[i];
                color =$('#'+id).attr('class').split(' ')[1];
                addClassSound(id , color);
                // console.log(id +' '+color)
                i++
            if (i ===simonSeq.length){
                clearInterval(myInterva)
            }
            },1000)
        }
        //user turn

        $('.pad').click(function () {
            // cursor in progress
            // this.style.cursor = "url('img/human-hand.jpg')";
            id= $(this).attr('id');
            userSeq.push(parseFloat(id));
            color = $(this).attr('class').split(' ')[1];
            // console.log(id +' '+ color)
            addClassSound(id , color);
            //check user seq
            if (!userCorrect()) {
                displayError();
                userSeq=[];
            }
            //checking end of seq
            if (userSeq.length === simonSeq.length){
                level++;
                userSeq =[];
                startSeq();
            }
        });

        //user vs simon
        function userCorrect() {
            console.log(userSeq);
            console.log(simonSeq);
            for (var i = 0 ; i < userSeq.length ; i++) {
                if (userSeq[i] !== simonSeq[i]) {
                    console.log('false');

                    return false
                }
            }
            console.log('true');
            return true

            
        }

        //error function
        
        function displayError() {
            var lives = 0;
            var myError = setInterval(function () {
            $('.display').text('!!');
                lives++;
                if (lives === 3) {
                    $('.display').text(level);
                    clearInterval(myError);
                    userSeq =[];
                    lives = 0;
                }
            }, 1000)
        }



        //random num
        
        function randomNum() {
            var random = Math.floor(Math.random() *4);
            simonSeq.push(random);
        }

        //add a temporary class and sound
        
        function addClassSound(id , color) {
            $('#'+id).addClass(color+'-active');
            // playSound(id)
            setTimeout(function() {
                $('#' + id).removeClass(color+'-active')
            },500 );
        }

        //sound function
        // function playSound(id){
        //     var sound =
        // }




        //
        // var game ={
        //     level : 1,
        //     turn : 0,
        //     difficulty : 1,
        //     score : 0,
        //     active : false,
        //     handler : false, //goes with the clicks
        //     shape : '.shape',// class
        //     generalSequance : [], //array contain random pads
        //     playSequance : [], // aray holds players pads
        //     init : function () {
        //         if (this.handler === false){
        //             this.initPadHandler();
        //         }
        //         this.newGame();
        //     },
        //     initPadHandler :function (){
        //         that =this;
        //         $('.pad').on('mouseup',function () {
        //             if (that.active === true){
        //                 var pad = parseFloat($(this).data('pad'),10);
        //                 that.flash($(this),1,300, pad);
        //
        //                 that.logPlayerSequence(pad);
        //             }
        //         })
        //         this.handler=true;
        //
        //     }
        //
        //
        //
        // }

    });

</script>

</body>
</html>